---
title: "false_reports_analysis"
output: 
  pdf_document: default 

---

```{r} 

# I. Data Cleaning 
# Load Libraries
library(tidyverse)
library(ggplot2)
library(knitr)
library(here)
library(lubridate)
library(stringr)
library(DT)
library(sf)

# Load Relevant Data 
data_raw <- read_csv(file = file.path(here(), '9.29.25_data.csv'),
                        # add appropriate column names
                        col_names = c('location', 'date_time_reported',
                                      'unique_id', 'date_time_raid',
                                      'day', 'time_category', 
                                      'raid_calls', 'notes',
                                      'street_address', 'type_report',
                                      'detention_centers', 'tactics_reported',
                                      'rapid_response_team', 'people_detained',
                                      'verified_by_rrt', 'OCAD_operator_uploaded',
                                      'business_worksite', 'car_description', 'license_plate')) 

# Select all rows, delete columns 20 and 21 (media links)
data_raw <-  data_raw[, c(1:19,23)]
data_raw <-  data_raw %>%
            rename("source" = X23) 

# Format the date and time correctly + make certain columns strings 
data_raw$date_time_reported <-  mdy_hm(data_raw$date_time_reported)
data_raw$date_time_raid <-  mdy_hm(data_raw$date_time_raid)

# Change capitalization and abbreviate to avoid problems downstream
data_raw <- data_raw %>%
  mutate(type_report = str_to_title(type_report)) %>%
  mutate(type_report = str_replace_all(type_report, "Corporate Collaboration", "Corp Collab"),
         type_report = str_replace_all(type_report, "Public Space Raid", "Pub Space Raid"),
         location = str_replace_all(location, "Chicago - |Chicago- ", ""),
         location = case_when(location == "" ~ "Chicago", TRUE ~ location))


# II. Data Transformation 

# Select all false sightings 
data_labeled <- data_raw %>%
  mutate(report_status = case_when(
    # This is the step where the consultant was mixing variables.
    # There is some overlap: some cases proven false were originally tagged as Rumors.
    str_detect(type_report, "False") ~ "Confirmed False",
    # 'False' takes precedence over 'Rumors'.
    str_detect(type_report, "Rumors") ~ "Unconfirmed",
    # Default: treat everything else as Confirmed True.
    TRUE ~ "Confirmed True")) 


# Clean up the labels in the refine_categories to get types of Raids 
data_labeled <- data_labeled %>%
  mutate(refined_categories = str_replace_all(type_report, "False|Rumors", ""),
         refined_categories = str_replace_all(refined_categories, ",,", ","),
         refined_categories = str_replace_all(refined_categories, "^,|,$", ""),
          # Public Space Raid 
         refined_categories = str_replace_all(refined_categories, "Ice Sighting,Pub Space Raid|Pub Space Raid,Ice Sighting",
                                              "Pub Space Raid"),
         # Worksite Raid 
         refined_categories = str_replace_all(refined_categories, "Ice Sighting,Worksite Raid|Worksite Raid,Ice Sighting|Pub Space Raid,Worksite Raid|Worksite Raid,Pub Space Raid", 
                                              "Worksite Raid"),
         # I-9 Audit
         refined_categories = str_replace_all(refined_categories, "Ice Sighting,I-9 Audit", "I-9 Audit"),
         # Corporate Collaboration 
         refined_categories = str_replace_all(refined_categories, "Ice Sighting,Corp Collab", "Corp Collab"),
        # Home raid
        refined_categories = str_replace_all(refined_categories, "Ice Sighting,Home Raid|Home Raid,Ice Sighting", "Home Raid"),
        # Replace blank spaces with Replace as placeholder
        refined_categories = case_when(is.na(refined_categories)|refined_categories == "" ~ "No tags", TRUE ~ refined_categories))

# III. Manual Edits 

# Clean up certain incidents manually that need additional reclassification
data_labeled <- data_labeled %>%
  mutate(refined_categories = 
           case_when(unique_id == "09-11 Melrose Park-River Forest on Chicago Ave." ~ "Unclass. Raid",
                     # They specifically raided a construction site 
                     unique_id == "09-18 Chicago - NWS - Hermosa-Springfield & North Ave." ~ "Worksite Raid",
    TRUE ~ refined_categories))

# Label specific worksites 
data_labeled <- data_labeled %>%
  mutate(business_worksite = 
           case_when(unique_id == "09-18 Chicago - NWS - Hermosa-Springfield & North Ave." ~ "Construction Site", TRUE ~ business_worksite))

```

I. Differentiation from AirTable Data 

The dashboard in AirTable counts each of the tags and produces a bar chart. Since this chart does considers FALSE and Rumors a classification tag, instead of its a separate variable, it unintentionally overstates the I-9 audits, incidents of corporate collaboration, worksite raids, home raids, public space raids, and ICE sightings that have occurred up to 9.29. 

For example, the visualization includes 970 ICE sightings, but this count includes sightings that have later been proven False ("Ice Sighting, False"). If we actually break down ICE sightings by whether or not they are true, false, or unproven, we find that only 272 have been proven true, 95 are confirmed false, 441 were unable to be confirmed. 


```{r}
# Visualization of Confirmed True, Confirmed False, and Unconfirmed 
data_type <- data_labeled %>%
  group_by(refined_categories, report_status) %>%
  count() %>%
  kable(caption = "Type of Incident by Report Validity")

data_type

# Bar Chart of variables  
ggplot(data_labeled, aes(x = refined_categories)) +
   geom_bar(aes(fill = report_status )) + 
   labs(title="Histogram Classifying Types of Incidents", 
       subtitle="Includes data from X to 9.25.25") +
  theme(axis.text = element_text(size = 7)) 


```



II. Analysis of Activities Verified by RRT 

When we analyze incidents where a rapid responder was dispatched (619/1290 cases), we can see that the overall distribution looks similar to the broader data set. 

Some notable exceptions exist. For example, false incidents comprise *12.5%* of total ICE sightings, but where a rapid responder was dispatched, incidents were proven false *22.3%* of the time. This discrepancy likely occurs because the broader data set includes referrals from the MIDAS network and relevant social media posts -- driving the number of proven sightings up. 

```{r}

# Visualization of Confirmed True, Confirmed False, and Unconfirmed 
data_type_2 <- data_labeled %>%
  filter(verified_by_rrt == "checked") %>%
  group_by(refined_categories, report_status) %>%
  count() 

# Visualization of activities verified by Rapid Responders
data_labeled %>%
  filter(verified_by_rrt == "checked") %>%
ggplot(aes(x = refined_categories)) +
   geom_bar(aes(fill = report_status)) + 
   labs(title="Histogram Classifying Types of Incidents", 
       subtitle="Includes data from 2.1.25 to 9.25.25") +
  theme(axis.text = element_text(size = 7)) 


data_labeled %>% 
  filter(verified_by_rrt == "checked") %>%
  group_by(refined_categories, report_status) %>%
  count()

```
II. Geographic Distribution of False Reports ()

In terms of geographic distribution of False Reports, false reports across all categories are concentrated in the following neighborhoods. 

```{r}

# I. Read GeoJSON file containing Chicago neighborhoods ...........................................
geojson_file <- "chicago_community_boundaries.json"
chicago_communities <- st_read(geojson_file) %>%
mutate(shape_area = as.numeric(shape_area),
       shape_len = as.numeric(shape_len))

# II. Read Evanston GeoJSON file............................................................
evanston_boundaries <- st_read("https://maps.cityofevanston.org/arcgis/rest/services/OpenData/ArcGISOpenData/MapServer/0/query?where=1=1&outFields=*&f=geojson") %>%
   mutate(community = "EVANSTON")
colnames(evanston_boundaries)[2] <- "shape_area"
colnames(evanston_boundaries)[3] <- "shape_len"

# III. Read Cicero and Bewryn GeoJSON file ......................................................
cicero_berwyn_boundaries <- st_read("https://geoservices.epa.illinois.gov/arcgis/rest/services/Political/IllinoisPoliticalBoundaries/MapServer/2/query?where=DIST_NAME+IN+('Cicero','Berwyn')&outFields=*&f=geojson") %>%
  rename("community" = "DIST_NAME")

colnames(cicero_berwyn_boundaries)[11] <- "shape_area"
colnames(cicero_berwyn_boundaries)[12] <- "shape_len"


# IV. Combine GeoSON file ...........................................................

# Ensure that our coordinate systems match 
evanston_boundaries <- st_transform(evanston_boundaries, st_crs(chicago_communities))
cicero_berwyn_boundaries <- st_transform(cicero_berwyn_boundaries, st_crs(chicago_communities))

# Bind our data together 
combined_sf_data <- bind_rows(chicago_communities, evanston_boundaries, cicero_berwyn_boundaries)

# V. Preprocessing to bind counts with JSON data ......................................................
location_counts <- data_labeled %>%
  mutate(community = str_to_upper(location),
         community = case_when(
                    str_detect(community, "PILSEN") ~ "LOWER WEST SIDE",
                    str_detect(community, "LITTLE VILLAGE") ~ "SOUTH LAWNDALE",
                    str_detect(community, "BACK OF THE YARDS|BOTY") ~ "NEW CITY",
                    str_detect(community, "DOWNTOWN|THE LOOP") ~ "LOOP",
                    str_detect(community, "SOUTH LOOP") ~ "NEAR SOUTH SIDE",
                    str_detect(community, "CHICAGO-PORTAGE PARK") ~ "PORTAGE PARK",
                    str_detect(community, "CHICAGO UPTOWN") ~ "UPTOWN",
                    str_detect(community, "CHICAGO ALBANY PARK") ~ "ALBANY PARK",
                    str_detect(community, "HUMBOLT PARK") ~ "HUMBOLDT PARK",
                    str_detect(community, "WEST LOOP|WICKER PARK|FULTON MARKET DISTRICT") ~ "NEAR WEST SIDE",
                    str_detect(community, "WEST 54TH AND PULASKI") ~ "WEST ELSDON",
                    str_detect(community, "BUCKTOWN") ~ "WEST TOWN",
                    str_detect(community, "MIDWAY") ~ "GARFIELD RIDGE",
                    str_detect(community, "CHINATOWN") ~ "ARMOUR SQUARE",
                    str_detect(community, "BELMONT/CAGRIN") ~ "BELMONT CRAGIN",
                    str_detect(community, "CALUMET PARK") ~ "WEST PULLMAN",
                    str_detect(community, "BLUE ISLAND") ~ "MORGAN PARK",
                    str_detect(community, "NORTH PULASKI|IRVING PARK") ~ "IRVING PARK",
                    str_detect(community, "ROSCOE VILLAGE") ~ "NORTH CENTER",
                    str_detect(community, "LAKEVIEW") ~ "LAKE VIEW",
                    str_detect(community, "BERWYN CICERO") ~ "BERWYN",
                    TRUE ~ community
                    )) %>%
group_by(community, report_status) %>%
count()

# join the counts with evanston data
map_df <- left_join(combined_sf_data, location_counts, by = "community")

# VI. Map my data ...................................................................
ggplot(map_df) +
  geom_sf(aes(fill = n), color = "black", size = 0.2) +
scale_fill_gradient(
  low = "green", high = "red", name = "Number of False Reports") +
  labs(title = "False Reports by Chicago Neighborhood") +
  theme_minimal() +
  theme(legend.position = "right")

```

III. Interpretation and Recommendations 
1. ICE Sightings are by far the common type of the incident. Thus far, the network has recorded 272 confirmed ICE Sightings, X Public Space Raids, Y Home Raids, and Z I-9 raids. 

Note that the majority of Public Space Raids have been concentrated around X (). 

2. Nearly half of all sightings (49.4%) were proven false or were unable to be verified by a RRT. When pressed for capacity, would highly recommend the FSN *triage alleged raids over ICE sightings.*  Having talked to rapid responders on the ground, it is clear that groups are facing significant strain on volunteer capacity. 

Would struggle consider leadership consider the following: Is every sighting worth validating? Is there a threshold that needs to be met for passing along a sighting? By developing a better protocol for identifying ICE sightings, OCAD and ICIRR can potentially alleviate responder burnout and deploy responders more strategically. 

3. In terms of false reports, these were concentrated in Little Village, Evanston, the Loop, and Uptown. There are two takeaways I'd like to stress:

1. Most worried about KYR education in Little Village and Uptown, since both areas have significant populations. Would recommend some community KYR trainings in these areas + canvassing.  
2.  High numbers of false reports are, in some ways, a good thing. That means people have utilized the ICIRR hotline and understand it's a resource. I am particularly worried about areas in the Southside that have no false sightings. Would recommend that the Far South and Southside teams coordinate some community canvassses to raise awareness of the FSN line. 



