---
title: "false_reports_analysis"
output: 
  pdf_document: default 

---

```{r} 

# I. Data Cleaning 
# Load Libraries
library(tidyverse)
library(ggplot2)
library(knitr)
library(here)
library(lubridate)
library(stringr)
library(DT)
library(sf)

# Load Relevant Data 
data_raw <- read_csv(file = file.path(here(), '9.29.25_data.csv'),
                        # add appropriate column names
                        col_names = c('location', 'date_time_reported',
                                      'unique_id', 'date_time_raid',
                                      'day', 'time_category', 
                                      'raid_calls', 'notes',
                                      'street_address', 'type_report',
                                      'detention_centers', 'tactics_reported',
                                      'rapid_response_team', 'people_detained',
                                      'verified_by_rrt', 'OCAD_operator_uploaded',
                                      'business_worksite', 'car_description', 'license_plate')) 

# Select all rows, delete columns 20 and 21 (media links)
data_raw <-  data_raw[, c(1:19,23)]
data_raw <-  data_raw %>%
            rename("source" = X23) 

# Format the date and time correctly + make certain columns strings 
data_raw$date_time_reported <-  mdy_hm(data_raw$date_time_reported)
data_raw$date_time_raid <-  mdy_hm(data_raw$date_time_raid)

# Change capitalization and abbreviate to avoid problems downstream
data_raw <- data_raw %>%
  mutate(type_report = str_to_title(type_report)) %>%
  mutate(type_report = str_replace_all(type_report, "Corporate Collaboration", "Corp Collab"),
         type_report = str_replace_all(type_report, "Public Space Raid", "Pub Space Raid"),
         location = str_replace_all(location, "Chicago - |Chicago- ", ""),
         location = case_when(location == "" ~ "Chicago", TRUE ~ location))


# II. Data Transformation 

# Select all false sightings 
data_labeled <- data_raw %>%
  mutate(report_status = case_when(
    # This is the step where the consultant was mixing variables.
    # There is some overlap: some cases proven false were originally tagged as Rumors.
    str_detect(type_report, "False") ~ "Confirmed False",
    # 'False' takes precedence over 'Rumors'.
    str_detect(type_report, "Rumors") ~ "Unconfirmed",
    # Default: treat everything else as Confirmed True.
    TRUE ~ "Confirmed True")) 


# Clean up the labels in the refine_categories to get types of Raids 
data_labeled <- data_labeled %>%
  mutate(refined_categories = str_replace_all(type_report, "False|Rumors", ""),
         refined_categories = str_replace_all(refined_categories, ",,", ","),
         refined_categories = str_replace_all(refined_categories, "^,|,$", ""),
          # Public Space Raid 
         refined_categories = str_replace_all(refined_categories, "Ice Sighting,Pub Space Raid|Pub Space Raid,Ice Sighting",
                                              "Pub Space Raid"),
         # Worksite Raid 
         refined_categories = str_replace_all(refined_categories, "Ice Sighting,Worksite Raid|Worksite Raid,Ice Sighting|Pub Space Raid,Worksite Raid|Worksite Raid,Pub Space Raid", 
                                              "Worksite Raid"),
         # I-9 Audit
         refined_categories = str_replace_all(refined_categories, "Ice Sighting,I-9 Audit", "I-9 Audit"),
         # Corporate Collaboration 
         refined_categories = str_replace_all(refined_categories, "Ice Sighting,Corp Collab", "Corp Collab"),
        # Home raid
        refined_categories = str_replace_all(refined_categories, "Ice Sighting,Home Raid|Home Raid,Ice Sighting", "Home Raid"),
        # Replace blank spaces with Replace as placeholder
        refined_categories = case_when(is.na(refined_categories)|refined_categories == "" ~ "No tags", TRUE ~ refined_categories))

# III. Manual Edits 

# Clean up certain incidents manually that need additional reclassification
data_labeled <- data_labeled %>%
  mutate(refined_categories = 
           case_when(unique_id == "09-11 Melrose Park-River Forest on Chicago Ave." ~ "Unclass. Raid",
                     # They specifically raided a construction site 
                     unique_id == "09-18 Chicago - NWS - Hermosa-Springfield & North Ave." ~ "Worksite Raid",
    TRUE ~ refined_categories))

# Label specific worksites 
data_labeled <- data_labeled %>%
  mutate(business_worksite = 
           case_when(unique_id == "09-18 Chicago - NWS - Hermosa-Springfield & North Ave." ~ "Construction Site", TRUE ~ business_worksite))

```

I. Differentiation from AirTable Data 

The dashboard in AirTable counts each of the tags and produces a bar chart. Since this chart does considers FALSE and Rumors a classification tag, instead of its a separate variable, it unintentionally overstates the I-9 audits, incidents of corporate collaboration, worksite raids, home raids, public space raids, and ICE sightings that have occurred up to 9.29. 

For example, the visualization includes 970 ICE sightings, but this count includes sightings that have later been proven False ("Ice Sighting, False"). If we actually break down ICE sightings by whether or not they are true, false, or unproven, we find that only 272 have been proven true, 95 are confirmed false, 441 were unable to be confirmed. 


```{r}
# Visualization of Confirmed True, Confirmed False, and Unconfirmed 
data_type <- data_labeled %>%
  group_by(refined_categories, report_status) %>%
  count() %>%
  kable(caption = "Type of Incident by Report Validity")

data_type

# Bar Chart of variables  
ggplot(data_labeled, aes(x = refined_categories)) +
   geom_bar(aes(fill = report_status )) + 
   labs(title="Histogram Classifying Types of Incidents", 
       subtitle="Includes data from X to 9.25.25") +
  theme(axis.text = element_text(size = 7)) 


```



II. Analysis of Activities Verified by RRT 

When we analyze incidents where a rapid responder was able to respond (619/1290 cases), we can see that the overall distribution looks similar to the greater dataset, that includes incidents that have not been passed onto the RRT. Some notable exceptions exist.

While False Ice Sightings comprise X% of totaly Ice Sighting (likely due to a disparate source of data), rapid responders are are 22.3% likely to encounter a false sighting. Nearly half of all sightings (49.4%) were proven false or were unable to be verified by a RRT. 

```{r}

# Visualization of Confirmed True, Confirmed False, and Unconfirmed 
data_type_2 <- data_labeled %>%
  filter(verified_by_rrt == "checked") %>%
  group_by(refined_categories, report_status) %>%
  count() 

# Visualization of activities verified by Rapid Responders
data_labeled %>%
  filter(verified_by_rrt == "checked") %>%
ggplot(aes(x = refined_categories)) +
   geom_bar(aes(fill = report_status)) + 
   labs(title="Histogram Classifying Types of Incidents", 
       subtitle="Includes data from X to 9.25.25") +
  theme(axis.text = element_text(size = 7)) 


data_labeled %>% 
  filter(verified_by_rrt == "checked") %>%
  group_by(refined_categories, report_status) %>%
  count()

```
II. Geographic Distribution of False Reports ()

In terms of geographic distribution of False Reports, false reports across all categories are concentrated in the following neighborhoods. 

```{r}
# Set GeoJSON file path and read GeoJSON 
geojson_file <- "chicago_community_boundaries.json"
chicago_communities <- st_read(geojson_file)

# 

location_data <- data_labeled %>%
  group_by(location, report_status) %>%
  count()

location_data
```

III. Interpretation and Recommendations 
1. ICE Sightings are by far the common type of the incident. Thus far, the network has recorded X confirmed ICE Sightings, X Public Space Raids, Y Home Raids, and Z I-9 raids. 

Note that the majority of Public Space Raids have been concentrated around X (). 

2. When pressed for capacity, would highly recommend the FSN *triage alleged raids over ICE sightings.* Half the time, ICE sightings are unable to be verified or are proven outright false. Having talked to rapid responders on the ground, it is clear that groups are facing this 

This may be a conversation for leadership to consider. Is every sighting worth validating, especially when there is limited information? My suggestion would be no -- and instead to implement a triage system under times of high calls. 

3. In terms of calls received by the FSN, the neighbors X, Y, and Z experienced disproportionately high rates of false calls. Would recommend heavy canvassing in these areas, and in particular, would recommend offering X. 